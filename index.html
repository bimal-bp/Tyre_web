<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Truck Tire Inspection System</title>
    <style>
        :root {
            --white: #ffffff;
            --light-gray: #f5f5f5;
            --dark-blue: #2c3e50;
            --border-radius: 8px;
            --box-shadow: 0 0 10px rgba(0,0,0,0.1);
            --green: #28a745;
            --yellow: #ffc107;
            --orange: #fd7e14;
            --red: #dc3545;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: var(--light-gray);
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--white);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        
        h1, h2, h3 {
            color: var(--dark-blue);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .summary-stats {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 15px;
            box-shadow: var(--box-shadow);
            margin-bottom: 20px;
        }
        
        .summary-stats h3 {
            margin-top: 0;
        }
        
        .summary-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }
        
        .summary-stat {
            padding: 10px;
            border-radius: 4px;
            text-align: center;
            font-weight: bold;
        }
        
        .summary-stat.green { background-color: var(--green); color: white; }
        .summary-stat.yellow { background-color: var(--yellow); color: #333; }
        .summary-stat.orange { background-color: var(--orange); color: white; }
        .summary-stat.red { background-color: var(--red); color: white; }
        
        .tipper-card {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 15px;
            box-shadow: var(--box-shadow);
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .tipper-card:hover {
            transform: translateY(-5px);
        }
        
        .tipper-card h3 {
            margin-top: 0;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .status-indicator {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.8rem;
            margin-top: 5px;
        }
        
        .status-indicator.green { background-color: var(--green); color: white; }
        .status-indicator.yellow { background-color: var(--yellow); color: #333; }
        .status-indicator.orange { background-color: var(--orange); color: white; }
        .status-indicator.red { background-color: var(--red); color: white; }
        
        .tire-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .tire-stat {
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        .tire-stat.green { background-color: var(--green); color: white; }
        .tire-stat.yellow { background-color: var(--yellow); color: #333; }
        .tire-stat.orange { background-color: var(--orange); color: white; }
        .tire-stat.red { background-color: var(--red); color: white; }
        
        .btn {
            background-color: var(--dark-blue);
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: background-color 0.3s;
            margin-top: 10px;
        }
        
        .btn:hover {
            background-color: #1a252f;
        }
        
        .hidden {
            display: none;
        }
        
        .tire-details-container {
            margin-top: 20px;
        }
        
        .tire-detail-row {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            border-bottom: 1px solid #eee;
        }
        
        .tire-detail-row:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .tire-position {
            font-weight: bold;
            width: 100px;
        }
        
        .tire-value {
            flex-grow: 1;
            text-align: right;
        }
        
        .photo-preview-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .photo-preview {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        
        .status-guide {
            margin-top: 30px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: var(--border-radius);
        }
        
        .status-guide h3 {
            margin-top: 0;
        }
        
        .status-guide-item {
            display: inline-block;
            margin-right: 15px;
            margin-bottom: 5px;
        }
        
        .inspection-notes {
            margin-top: 15px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 4px;
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            .summary-stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Truck Tire Inspection System</h1>
        
        <div id="dashboard">
            <h2>Tipper Fleet Overview</h2>
            <div class="summary-stats">
                <h3>Fleet Summary</h3>
                <div class="summary-stats-grid" id="fleet-summary">
                    <!-- Summary stats will be generated here -->
                </div>
            </div>
            <div class="dashboard" id="tipper-cards-container">
                <!-- Tipper cards will be generated by JavaScript -->
            </div>
            
            <div class="tire-details-container hidden" id="tipper-details">
                <button class="btn" onclick="showTipperOverview()">‚Üê Back to Fleet</button>
                <h2 id="selected-tipper-name">Tipper Details</h2>
                
                <div class="tire-stats" id="tire-stats-summary">
                    <!-- Tire stats summary will be generated here -->
                </div>
                
                <div id="tire-details-list">
                    <!-- Tire details will be generated here -->
                </div>
                
                <div class="inspection-notes" id="inspection-notes">
                    <!-- Inspection notes will be shown here -->
                </div>
                
                <h3>Tire Photos</h3>
                <div class="photo-preview-container" id="tire-photos-container">
                    <!-- Tire photos will be shown here -->
                </div>
            </div>
            
            <div class="status-guide">
                <h3>Tire Status Guide</h3>
                <div class="status-guide-item"><span class="status-indicator green">Good</span> > 60% tread</div>
                <div class="status-guide-item"><span class="status-indicator yellow">Monitor</span> 40-60% tread</div>
                <div class="status-guide-item"><span class="status-indicator orange">Warning</span> 20-40% tread</div>
                <div class="status-guide-item"><span class="status-indicator red">Critical</span> < 20% tread</div>
            </div>
        </div>
    </div>

    <script>
        // Sample data for tippers with inspection notes
        const tippers = {
            "Tipper 52": {
                kmr: 12500,
                lastInspection: "2023-05-15",
                inspectionNotes: "Minor sidewall damage on L2, recommend close monitoring. R4 shows uneven wear pattern.",
                tyres: {
                    L1: 47.74, R1: 36.26, L2: 17.00, R2: 16.91, L3: 22.43, R3: 21.09,
                    L4: 94.22, R4: 26.30, L5: 92.04, R5: 26.83
                },
                photos: [
                    "https://via.placeholder.com/300x200?text=Front+Left+Tire",
                    "https://via.placeholder.com/300x200?text=Rear+Right+Tire"
                ]
            },
            "Tipper 27": {
                kmr: 18200,
                lastInspection: "2023-05-10",
                inspectionNotes: "L3 and R4 critically low, recommend immediate replacement. Alignment check needed.",
                tyres: {
                    L1: 56.35, R1: 75.43, L2: 38.26, R2: 26.91, L3: 12.09, R3: 36.30,
                    L4: 11.43, R4: 9.22, L5: 22.13, R5: 42.35
                },
                photos: [
                    "https://via.placeholder.com/300x200?text=Front+Right+Tire",
                    "https://via.placeholder.com/300x200?text=Middle+Left+Tire"
                ]
            },
            "Tipper 97": {
                kmr: 9800,
                lastInspection: "2023-05-18",
                inspectionNotes: "All tires in acceptable condition. Regular maintenance schedule recommended.",
                tyres: {
                    L1: 79.78, R1: 78.13, L2: 27.00, R2: 23.48, L3: 31.57, R3: 25.78,
                    L4: 36.74, R4: 41.57, L5: 44.00, R5: 41.70
                },
                photos: [
                    "https://via.placeholder.com/300x200?text=Rear+Left+Tire",
                    "https://via.placeholder.com/300x200?text=Middle+Right+Tire"
                ]
            },
            "Tipper 26": {
                kmr: 15400,
                lastInspection: "2023-05-12",
                inspectionNotes: "R21 showing signs of wear, recommend rotation. Overall good condition.",
                tyres: {
                    L1: 69.17, L21: 59.00, L22: 48.74, L31: 62.26, L32: 54.17,
                    R1: 66.52, R21: 24.30, R22: 50.09, R31: 55.13, R32: 73.22
                },
                photos: [
                    "https://via.placeholder.com/300x200?text=Front+Left+Tire",
                    "https://via.placeholder.com/300x200?text=Rear+Right+Tire"
                ]
            },
            "Tipper 80": {
                kmr: 20300,
                lastInspection: "2023-05-08",
                inspectionNotes: "Multiple tires in warning zone, schedule replacement within next month.",
                tyres: {
                    L1: 33.17, L21: 34.13, L22: 46.61, L31: 24.22, L32: 26.09,
                    R1: 44.57, R24: 30.87, R22: 34.83, R31: 35.65, R32: 25.39
                },
                photos: [
                    "https://via.placeholder.com/300x200?text=Middle+Left+Tire",
                    "https://via.placeholder.com/300x200?text=Front+Right+Tire"
                ]
            },
            "Tipper 95": {
                kmr: 7600,
                lastInspection: "2023-05-20",
                inspectionNotes: "L21 and L22 critically low, replace immediately. Others in good condition.",
                tyres: {
                    L1: 59.13, L21: 9.13, L22: 9.30, L31: 92.35, L32: 89.65,
                    R1: 55.87, R21: 56.30, R22: 50.82, R31: 80.83, R32: 43.04
                },
                photos: [
                    "https://via.placeholder.com/300x200?text=Rear+Left+Tire",
                    "https://via.placeholder.com/300x200?text=Middle+Right+Tire"
                ]
            }
        };

        // Inventory and usage data
        const inventory = {
            tiresInStock: 50,
            tiresOrderedThisMonth: 20,
            tiresUsedThisMonth: 15
        };

        // Function to get tire status based on tread percentage
        function getTireStatus(tread) {
            if (tread < 20) return { status: "critical", color: "red" };
            if (tread < 40) return { status: "warning", color: "orange" };
            if (tread < 60) return { status: "monitor", color: "yellow" };
            return { status: "good", color: "green" };
        }

        // Function to calculate average tread for a tipper
        function calculateAverageTread(tipper) {
            const tires = Object.values(tipper.tyres);
            const sum = tires.reduce((acc, tread) => acc + tread, 0);
            return sum / tires.length;
        }

        // Function to calculate fleet-wide tire status counts
        function calculateFleetTireStatus() {
            const counts = { good: 0, monitor: 0, warning: 0, critical: 0 };
            Object.values(tippers).forEach(tipper => {
                Object.values(tipper.tyres).forEach(tread => {
                    const tireStatus = getTireStatus(tread).status;
                    counts[tireStatus]++;
                });
            });
            return counts;
        }

        // Function to generate summary stats
        function generateSummaryStats() {
            const summaryContainer = document.getElementById('fleet-summary');
            const tireStatusCounts = calculateFleetTireStatus();
            summaryContainer.innerHTML = `
                <div class="summary-stat">${inventory.tiresInStock} Tires in Stock</div>
                <div class="summary-stat">${inventory.tiresOrderedThisMonth} Ordered This Month</div>
                <div class="summary-stat">${inventory.tiresUsedThisMonth} Used This Month</div>
                <div class="summary-stat green">${tireStatusCounts.good} Good</div>
                <div class="summary-stat yellow">${tireStatusCounts.monitor} Monitor</div>
                <div class="summary-stat orange">${tireStatusCounts.warning} Warning</div>
                <div class="summary-stat red">${tireStatusCounts.critical} Critical</div>
            `;
        }

        // Function to generate tipper cards for dashboard
        function generateTipperCards() {
            const container = document.getElementById('tipper-cards-container');
            container.innerHTML = '';
            
            Object.keys(tippers).forEach(tipperName => {
                const tipper = tippers[tipperName];
                const avgTread = calculateAverageTread(tipper);
                const status = getTireStatus(avgTread);
                
                // Count tires in each status
                const counts = { critical: 0, warning: 0, monitor: 0, good: 0 };
                Object.values(tipper.tyres).forEach(tread => {
                    const tireStatus = getTireStatus(tread).status;
                    counts[tireStatus]++;
                });
                
                const card = document.createElement('div');
                card.className = 'tipper-card';
                card.onclick = () => showTipperDetails(tipperName);
                card.innerHTML = `
                    <h3>${tipperName}</h3>
                    <p>KMR: ${tipper.kmr.toLocaleString()}</p>
                    <p>Avg Tread: ${avgTread.toFixed(2)}%</p>
                    <p>Last Inspection: ${tipper.lastInspection}</p>
                    <p class="inspection-notes">${tipper.inspectionNotes}</p>
                    <div class="status-indicator ${status.color}">${status.status.toUpperCase()}</div>
                    <div class="tire-stats">
                        <span class="tire-stat green">${counts.good} Good</span>
                        <span class="tire-stat yellow">${counts.monitor} Monitor</span>
                        <span class="tire-stat orange">${counts.warning} Warning</span>
                        <span class="tire-stat red">${counts.critical} Critical</span>
                    </div>
                    <button class="btn" onclick="event.stopPropagation(); showTipperDetails('${tipperName}')">View Details</button>
                    <button class="btn" onclick="event.stopPropagation(); window.location.href='inspection.html?tipper=${tipperName}'">New Inspection</button>
                `;
                container.appendChild(card);
            });
        }

        // Function to show tipper details
        function showTipperDetails(tipperName) {
            const overview = document.getElementById('tipper-cards-container');
            const details = document.getElementById('tipper-details');
            const name = document.getElementById('selected-tipper-name');
            const statsContainer = document.getElementById('tire-stats-summary');
            const detailsContainer = document.getElementById('tire-details-list');
            const photosContainer = document.getElementById('tire-photos-container');
            const notesContainer = document.getElementById('inspection-notes');
            
            overview.classList.add('hidden');
            details.classList.remove('hidden');
            name.textContent = tipperName + ' Tire Details';
            
            const tipper = tippers[tipperName];
            const avgTread = calculateAverageTread(tipper);
            const status = getTireStatus(avgTread);
            
            // Count tires in each status
            const counts = { critical: 0, warning: 0, monitor: 0, good: 0 };
            Object.values(tipper.tyres).forEach(tread => {
                const tireStatus = getTireStatus(tread).status;
                counts[tireStatus]++;
            });
            
            // Update stats summary
            statsContainer.innerHTML = `
                <div>
                    <strong>KMR:</strong> ${tipper.kmr.toLocaleString()} | 
                    <strong>Last Inspection:</strong> ${tipper.lastInspection} | 
                    <strong>Avg Tread:</strong> ${avgTread.toFixed(2)}%
                </div>
                <div class="tire-stats" style="margin-top: 10px;">
                    <span class="tire-stat green">${counts.good} Good</span>
                    <span class="tire-stat yellow">${counts.monitor} Monitor</span>
                    <span class="tire-stat orange">${counts.warning} Warning</span>
                    <span class="tire-stat red">${counts.critical} Critical</span>
                </div>
            `;
            
            // Update tire details list
            detailsContainer.innerHTML = '';
            Object.keys(tipper.tyres).forEach(position => {
                const tread = tipper.tyres[position];
                const tireStatus = getTireStatus(tread);
                
                const row = document.createElement('div');
                row.className = 'tire-detail-row';
                row.innerHTML = `
                    <div class="tire-position">${position}</div>
                    <div class="tire-value">${tread.toFixed(2)}%</div>
                    <div><span class="status-indicator ${tireStatus.color}">${tireStatus.status.toUpperCase()}</span></div>
                `;
                detailsContainer.appendChild(row);
            });
            
            // Update inspection notes
            notesContainer.innerHTML = `<strong>Inspection Notes:</strong> ${tipper.inspectionNotes}`;
            
            // Update tire photos
            photosContainer.innerHTML = '';
            tipper.photos.forEach(photoUrl => {
                const img = document.createElement('img');
                img.className = 'photo-preview';
                img.src = photoUrl;
                photosContainer.appendChild(img);
            });
        }

        // Function to show tipper overview
        function showTipperOverview() {
            const overview = document.getElementById('tipper-cards-container');
            const details = document.getElementById('tipper-details');
            overview.classList.remove('hidden');
            details.classList.add('hidden');
        }

        // Initialize the dashboard when page loads
        window.onload = function() {
            generateSummaryStats();
            generateTipperCards();
        };
    </script>
</body>
</html>
